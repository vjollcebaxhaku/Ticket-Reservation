generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:@localhost:3306/ticket-reservation"
}

model User {
  id          Int         @id @default(autoincrement())
  email       String      @unique
  password    String?
  name        String?
  surname     String?
  username    String?
  role        String  @default("user")
  tickets     UserTicket[]
  permissions Json?
}

model Ticket {
  id          Int         @id @default(autoincrement())
  name        String
  price       Float
  type        String
  userTickets UserTicket[]
}

model UserTicket {
  id       Int      @id @default(autoincrement())
  userId   Int
  ticketId Int
  quantity Int     // New field to store the quantity of tickets purchased
  user     User     @relation(fields: [userId], references: [id])
  ticket   Ticket   @relation(fields: [ticketId], references: [id])
}


model News {
  id          Int      @id @default(autoincrement())
  title       String
  content     String
  publishedAt DateTime
}

model Gallery {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  imageUrl    String
  publishedAt DateTime  @default(now())
}

model FAQ {
  id          Int      @id @default(autoincrement())
  question    String
  answer      String
}

model Lineup {
  id          Int      @id @default(autoincrement())
  artistName  String
  genre       String
  description String
  imageUrl    String
  concertID   Int
  concert     Concert  @relation(fields: [concertID], references: [id])
}

model Concert {
  id       Int      @id @default(autoincrement())
  name     String
  year     Int
  location String
  lineups  Lineup[]
}
